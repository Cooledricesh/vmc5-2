# 📝 TDD 버그 수정/기능 구현 요청 템플릿

## 🔴 문제 상황 / 요구사항

### 현재 문제 상황
- **증상**: [사용자에게 보이는 에러나 문제 동작을 구체적으로 기술]
- **재현 경로**: [문제를 재현하는 단계별 순서]
- **에러 메시지**: [콘솔이나 화면에 표시되는 정확한 에러 메시지]
- **예상 원인**: [문제의 원인으로 추측되는 부분]
- **영향 범위**: [이 문제가 영향을 미치는 기능들]

### 기대 동작
- [정상적으로 동작해야 하는 방식을 명확히 기술]

## 🧪 TDD 방식으로 해결해주세요

### 📍 1단계: RED - 실패하는 테스트 먼저 작성

#### 1.1 통합/E2E 테스트 작성
```
위치: tests-e2e/[feature-name].spec.ts
- [ ] 전체 플로우 테스트
- [ ] 사용자 시나리오 테스트
- [ ] 시스템 간 통합 테스트
```

#### 1.2 단위 테스트 작성
```
위치: src/features/[feature]/__tests__/
- [ ] 핵심 비즈니스 로직 테스트
- [ ] 서비스 레이어 테스트
- [ ] 미들웨어/헬퍼 함수 테스트
```

#### 1.3 API/라우팅 테스트 작성 (해당시)
```
위치: src/features/[feature]/__tests__/route.test.ts
- [ ] 엔드포인트 존재 여부 테스트
- [ ] 요청/응답 형식 테스트
- [ ] 에러 응답 테스트
```

**⚠️ 중요: 테스트 실행하여 모든 테스트가 실패하는지 확인**

### ✅ 2단계: GREEN - 테스트 통과하는 최소 코드 구현

#### 2.1 핵심 기능 구현
- [ ] [구현해야 할 핵심 기능 1]
- [ ] [구현해야 할 핵심 기능 2]
- [ ] [구현해야 할 핵심 기능 3]

#### 2.2 단계별 검증
- 각 구현 단계마다 테스트 실행
- 점진적으로 테스트가 통과하는지 확인
- 실패하는 테스트에 집중

### 🔧 3단계: REFACTOR - 코드 개선

#### 3.1 코드 품질 개선
- [ ] 중복 코드 제거
- [ ] 함수/클래스 분리
- [ ] 네이밍 개선
- [ ] 타입 안정성 강화

#### 3.2 성능 및 안정성
- [ ] 에러 처리 강화
- [ ] 재시도 로직 추가 (필요시)
- [ ] 로깅 추가
- [ ] 성능 최적화

## 📋 구현 요구사항

### 기능 요구사항
- **필수 기능 1**: [구체적인 기능 설명]
- **필수 기능 2**: [구체적인 기능 설명]
- **필수 기능 3**: [구체적인 기능 설명]

### 비기능 요구사항
- **성능**: [응답 시간, 처리량 등]
- **보안**: [인증, 인가, 데이터 보호 등]
- **확장성**: [향후 확장 고려사항]
- **유지보수성**: [코드 가독성, 문서화 등]

## 🎯 테스트 커버리지

### 정상 케이스 (Happy Path)
- [ ] [메인 성공 시나리오]
- [ ] [대체 성공 시나리오]

### 엣지 케이스
- [ ] [경계값 테스트]
- [ ] [특수한 입력 테스트]
- [ ] [동시성/중복 처리]

### 에러 케이스
- [ ] [외부 서비스 실패]
- [ ] [네트워크 오류]
- [ ] [잘못된 입력]
- [ ] [권한 부족]
- [ ] [리소스 부족]

## ✔️ 완료 조건 (Definition of Done)

### 테스트
- [ ] 모든 새로운 테스트 작성 완료
- [ ] 모든 테스트 통과 (새 테스트 + 기존 테스트)
- [ ] 테스트 커버리지 [X]% 이상

### 코드 품질
- [ ] TypeScript 타입 에러 없음
- [ ] ESLint 경고 없음
- [ ] 빌드 성공

### 문서화
- [ ] API 문서 업데이트 (해당시)
- [ ] README 업데이트 (해당시)
- [ ] 코드 주석 추가 (복잡한 로직)

### 검증
- [ ] 로컬 환경에서 동작 확인
- [ ] 개발 환경에서 동작 확인

## 📌 참고사항

### 테스트 우선순위
1. 핵심 비즈니스 로직
2. 사용자 경험에 직접적 영향
3. 자주 발생하는 시나리오
4. 에러 처리

### TDD 원칙 준수
- ❌ 테스트 없는 코드 작성 금지
- ❌ 한 번에 너무 많은 기능 구현 금지
- ✅ 작은 단위로 RED-GREEN-REFACTOR 반복
- ✅ 각 커밋은 의미 있는 단위로

### 디버깅 팁
- 실패 지점(Failure Point) 명확히 파악
- 에러 타입으로 문제 영역 구분
- 기존 테스트와 새 테스트의 범위 구분
- 로그를 활용한 문제 추적

---

## 사용 방법
1. 이 템플릿을 복사하여 새 파일 생성
2. 각 섹션의 플레이스홀더를 실제 내용으로 교체
3. 체크박스를 활용하여 진행 상황 추적
4. 완료 조건을 모두 만족할 때까지 반복

## 예시 참고
- `/docs/prompt/require_test_example.md` - Clerk-Supabase 동기화 버그 수정 사례